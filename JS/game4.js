let questions = [
    {
        id: 1,
        question: "Which one is the original source from which the Indian national motto Satyameva jayate is adopted?",
        choice: ['Mundaka Upanishad', 'Prashna Upanishad', ' Samaveda', ' Yajurveda'],
        answer: 'Mundaka Upanishad',
        about: "Following the independence of India, it was adopted as the national motto of India on 26 January 1950, the day India became a republic. It is inscribed in the Devanagari script at the base of the Lion Capital of Ashoka and forms an integral part of the Indian national emblem. The emblem and the words 'Satyameva Jayate' are inscribed on one side of all Indian currency and national documents.",
        hint: 'Is an ancient Sanskrit Vedic text, embedded inside Atharva Veda.',
    },
    {
        id: 2,
        question: "The Ashok stambh of which place has been adopted as the national emblem of India?",
        choice: ['Sanchi', 'Vaishali', ' Sarnath', 'Allahabad'],
        answer: 'Sarnath',
        about: "The Ashoka Pillar of Sarnath is one of the remaining 19 pillars built by king Ashoka during his reign. The stambh has four lions sitting back to back. Power, courage, confidence and pride are represented by these four lions. The stambh also has illustrated figures of a horse and a bull.",
        hint: 'Where Gautama Buddha first taught Dharma.',
    },
    {
        id: 3,
        question: "Declared as World Heritage Sites by UNESCO since 1983, the paintings and sculptures of Ajanta and Ellora, considered masterpieces of Buddhist religious art, have had a great influence in the development of art in India. Total number of caves present in the Ajanta and Ellora Caves, Maharashtra are?",
        choice: ['41,20', '33,31', '21,30', '30,34'],
        answer: '30,34',
        about: "Ajanta Caves date back to the time between 2nd century BCE to 480 or 650 CE. On the other hand, Ellora Caves were discovered after Ajanta that is between 5th and 10 century CE. Ajanta Caves display Viharas and Buddhist monasteries and Ellora Caves consists of religious centers for Hindu, Buddhist, and Jain.",
        hint: '_ _, 3_',
    },
    {
        id: 4,
        question: "Museums collect and preserve our objects and materials of religious, cultural and historical value. They are a good source of entertainment. These museums help to preserve and promote our cultural heritage. The largest museum of India is located at",
        choice: ['Kolkata', 'Delhi', 'Mumbai', 'Hyderabad'],
        answer: 'Kolkata',
        about: "The Indian Museum in Kolkata, West Bengal, India, also referred to as the Imperial Museum at Calcutta in colonial-era texts, is the ninth oldest museum in the world, the oldest museum in India, and the largest museum in India. It has rare collections of antiques, armour and ornaments, fossils, skeletons, mummies and Mughal paintings.",
        hint: 'Former capital (​1772–1911) of British India.',
    },
    {
        id: 5,
        question: "The Rath Yatra at Puri is celebrated in honour of which Hindu deity",
        choice: ['Ram', 'Jagannath', 'Vishnu', 'Shiva'],
        answer: 'Jagannath',
        about: "The Jagannath Temple in Puri, Odisha is one of the four most sacred shrines of India. It is more than 800 years old and is the place where Lord Shri Krishna resides in the form of Jagannath. His elder brother, Balram and his sister, Goddess Subhadra are also worshiped here.",
        hint: 'Balabhadra & ‎Subhadra.',
    },
    {
        id: 6,
        question: "Jana Gana Mana is the national anthem of India. It was originally composed as Bharoto Bhagyo Bidhata in Bengali by polymath Rabindranath Tagore. The first stanza of the song Bharoto Bhagyo Bidhata was adopted by the Constituent Assembly of India as the National Anthem on 24 January 1950. The National Anthem was first sung in the year?",
        choice: ['1921', '1911', '1931', '1941'],
        answer: '1911',
        about: "The original national anthem song was written by the Rabindranath Tagore which was later translated into the Hindi and Urdu by Abid Ali. The full version National Anthem song is sung using the orchestral/choral adaptation (made by English composer, Herbert Murrill on request of Nehru).",
        hint: 'It was before 1935.',
    },
    {
        id: 7,
        question: "The National Song of India, Vande Mataram, composed in Sanskrit  was a source of inspiration to the people in their struggle for freedom. The National Song of India was composed by?",
        choice: ['Sarat Chandra Chattopadhyay', 'Kazi Nazrul Islam', 'Bankimchandra Chatterji', 'Ram Mohan Roy'],
        answer: 'Bankimchandra Chatterji',
        about: "He wrote Vande Mataram at Chinsurah, near the river Hooghly (near Mallik Ghat).  It is assumed that the concept of Vande Mataram clicked to Bankim Chandra Chattopadhyay when he was serving as a government official (a District Collector), around 1876.",
        hint: 'Indian novelist, poet and journalist. ',
    },
    {
        id: 8,
        question: "Who composed the famous song 'Sare Jahan Se Achha'?",
        choice: ['Allama Iqbal', 'Javed Iqbal', 'Jaun Elia', 'Muhammad Ali Jinnah'],
        answer: 'Allama Iqbal',
        about: "Recited by Iqbal the following year at Government College, Lahore, now in Pakistan, it quickly became an anthem of opposition to the British rule in India.The song, an ode to Hindustan—the land comprising present-day Bangladesh, India, and Pakistan—both celebrated and cherished the land even as it lamented its age-old anguish. Also known as Tarana-e-Hindi (“Anthem of the People of Hindustan”), it was later published in 1924 in the Urdu book Bang-i-Dara.",
        hint: 'South Asian Muslim writer, philosopher, and politician, whose poetry in the Urdu language is among the greatest of the twentieth century.',
    },
    {
        id: 9,
        question: "‘Dandiya’ or ‘Dandiya Raas’ is a dance form performed during the time of Navratri. Originally performed in honor of Goddess Durga, the dance form represents a battle between the demon Mahishasura and the Goddess. 'Dandia' is a popular dance of:",
        choice: ['Rajasthan', 'Gujarat', 'Assam', 'Karnataka'],
        answer: 'Gujarat',
        about: "Dandiya dates back to ancient times where it used to be a learning component during footworks practice for sword fight. Initially, it was performed by men.",
        hint: 'Western coast of India.',
    },
    {
        id: 10,
        question: "Tansen, a great musician of his time, was in the court of –",
        choice: ['Akbar', 'Shah Jahan', 'Jahangir', 'Humayun'],
        answer: 'Akbar',
        about: "Numerous legends have been created around him whicg mix facts and fiction. Although, the accuracy of these stories is doubtful, it is widely accepted that Akbar considered him as a Navaratna (nine jewels), and honored him the title Mian which means learned man.",
        hint: 'The emperor who reigned from 1556 to 1605.',
    },
    {
        id: 11,
        question: "The Panchatantra is a book of niti,the wise conduct of life,written in the form of a chain of simple stories.Each of these stories has a moral and philosophical theme aiming to guide the reader on how to attain success in life by understanding human nature.‘Panchatantra’ is originally written by",
        choice: ['Kalidas', 'Vishnu Sharma', 'Tulsi Das', 'None of these'],
        answer: 'Vishnu Sharma',
        about: "Vishnu Sharma was the author of this anthropomorphic political treatise called Panchatantra. He lived in Varanasi in the 3rd century BC. He was a Sanskrit scholar and the official Guru of the then prince of Kashi.He wrote Panchatantra to teach political science to his royal disciples.",
        hint: 'He lived in Varanasi in the 3rd century BC.',
    },
    {
        id: 12,
        question: "The famous Red Fort is known by that name because of the red stone with which it is built and it is one of the most magnificent palaces in the world. Where is it located?",
        choice: ['Kolkata', 'Chennai', 'Delhi', 'Jaipur'],
        answer: 'Delhi',
        about: "Red Fort is White! Yes, you heard it right! Red fort was made up of lime stones and when the white stone started chipping off, the Britishers painted it with red paint.",
        hint: 'Massive metropolitan area in the country’s north.',
    },
    {
        id: 13,
        question: "An important monument of the city, is a memorial built in commemoration of more than 80,000 Indian soldiers who were killed during World War I. The monument is an imposing 42 meters high arch and was designed by the famous architect Edwin Lutyens. Name this monument:",
        choice: ['Qutub Minar', 'Charminar', 'India Gate', 'Gwalior Fort'],
        answer: 'India Gate',
        about: "The foundation stone of India Gate was laid by the Duke of Connaught, on 10th February 1921. It took approximately 10 years to complete the construction work on the monument, which came to an end in 1931.",
        hint: 'Formerly called Kingsway.',
    },
    {
        id: 14,
        question: "During the last 150 years, many writers have contributed to the development of modern Indian literature, written in a number of regional languages as well as in English. One of the greatest Bengali writers, ___ became the first Indian to win the Nobel Prize for literature in 1913. Fill in the blanks:",
        choice: ['Kabir Das', 'Sarojini Naidu', 'Rabindranath Tagore', 'Kazi Nazrul Islam'],
        answer: 'Rabindranath Tagore',
        about: "A poet, musician, writer and even a painter, Rabindranath Tagore was one of the greatest minds of India. The first Asian to win a Nobel Prize, Tagore composed more than 2,000 songs and penned a large number of poems, stories, dramas, and novels. His works “Gitanjali” and “Jeevan Smriti” are still cherished today.",
        hint: 'Gurudev, Kobiguru.',
    },
    {
        id: 15,
        question: "The National School of Drama(NSD) - one of the foremost theatre institutions in the world and the only one of its kind in India was set up by Sangeet Natak Akademi in?",
        choice: ['1969', '1953', '1959', '1963'],
        answer: '1959',
        about: "The professional performing wing of the NSD is the Repertory Company, set up in 1964. The Repertory Company has staged over 120 plays based on the works of about 70 playwrights and featuring around 50 directors in several countries.",
        hint: 'It was a year after 1955.',
    }
];
//-----------------------------------------------------------------------------------------// 
let username = sessionStorage.getItem('loggedInUserName');
let HIGH_SCORE = JSON.parse(localStorage.getItem(username))[1]; //////--------------- for game 1
let CURRENT_SCORE = 0;
let QUESTION_COUNTER = 1;
let CLICKED = false;
let SCORE = [];

// ----------------------head section-------------------------//
let questionCount = document.querySelector('#questionCount');
let totalQuestions = document.querySelector('#totalQuestions');
let currentScore = document.querySelector('#score');
let nextButton = document.querySelector('#next');
let nextButtonBox = document.querySelector('#next-btn');
let progress = document.querySelector('#progressbarFull');
let hint = document.querySelector('#hint');
let hintText = document.querySelector('#hint-text');
let h = JSON.parse(localStorage.getItem(username + "-hint"));
//---------------------- body section -----------------------//
let question = document.querySelector('#question');
let options = document.querySelectorAll('.options');
//-------------------------popup section-----------------//
let txtContent = document.querySelector("#popup-content-text");
let imgContent = document.querySelector("#image-content-img");
let popup = document.querySelector("#popup");

// -----------------------onload update-----------------
let numberOfQuestions = questions.length;
totalQuestions.innerText = numberOfQuestions;
questionCount.innerText = QUESTION_COUNTER;
progress.style.width = `${(QUESTION_COUNTER / numberOfQuestions) * 100}%`;

question.innerText = questions[0].question;
for (let op = 0; op <= 3; op++)
    options[op].innerText = `${questions[0].choice[op]}`;


hint.addEventListener('click', function () {
    setTimeout(function () {
        hintText.style.visibility = "visible";
        if (h[3] === -1)
            hintText.innerText = "No more hints";
        else
            hintText.innerText = "Only " + h[3] + " hints left out of 5";
        setTimeout(function () {
            if (h[3] === -1)
                hintText.innerText = "No more hints";
            else
                hintText.innerText = "Hint: '" + questions[QUESTION_COUNTER - 1].hint + "'";
            setTimeout(function () {
                hintText.style.visibility = "hidden";
            }, 5000)
        }, 1000);
    }, 10);

    let updateHint;
    if (h[3] > -1) {
        h[3]--;
        localStorage.setItem(username + "-hint", JSON.stringify(h));
    }
});

// --------------------------program execution----------------------

nextButton.addEventListener('click', next); //allows you to skip questions

for (let i = 0; i <= 3; i++)
{
    options[i].addEventListener('click', function (el) {
        let CLICKED = true;
        let ans = el.path[0].innerText;
        let correctAns = questions[QUESTION_COUNTER - 1].answer.toString();
        let max = total(SCORE);

        if (ans === correctAns) 
        {
            clickPlay(1);
            if (SCORE.length < numberOfQuestions) {
                SCORE.push(10);
                max = total(SCORE);
                currentScore.innerText = max;

                if (max === numberOfQuestions * 10)
                    CURRENT_SCORE = max;

                if (CURRENT_SCORE == max) {
                    let newData = JSON.parse(localStorage.getItem(username));
                    newData[4] = CURRENT_SCORE;        //////--------------- for game 4
                    newData[5] = 1;
                    localStorage.setItem(username, JSON.stringify(newData));
                }
            }

            for (let i = 0; i <= 3; i++) {
                options[i].style.backgroundColor = "#9ea2a6";
            }
            el.path[0].style.backgroundColor = "green";
        }
        else
        {
            clickPlay(0);
            if (SCORE.length < numberOfQuestions) {
                SCORE.push(0);
                max = total(SCORE);
                currentScore.innerText = max;
            }

            for (let i = 0; i <= 3; i++) {
                options[i].style.backgroundColor = "#9ea2a6";
            }
            el.path[0].style.backgroundColor = "red";
        }

        if (CLICKED == true)
        {
            setTimeout(lateCall, 750);
        }
    });
}

// ---------------------------function definitions--------------------------
function next() {
    if (QUESTION_COUNTER === numberOfQuestions) {
        nextButton.setAttribute("href", "dashboard.html");
        return
    }
    if (QUESTION_COUNTER === numberOfQuestions - 1)
        nextButtonBox.innerText = "Finish";

    QUESTION_COUNTER++;

    setHeader();
    setQuestions();
}

function setHeader() {
    questionCount.innerText = QUESTION_COUNTER;
    progress.style.width = `${(QUESTION_COUNTER / numberOfQuestions) * 100}%`;
}

function setQuestions() {
    question.innerText = questions[QUESTION_COUNTER - 1].question;
    for (let op = 0; op <= 3; op++)
        options[op].innerText = `${questions[QUESTION_COUNTER - 1].choice[op]}`;
}

function resetColors() {
    for (let i = 0; i <= 3; i++) {
        options[i].style.backgroundColor = "steelblue";
    }
}

function popupFun(k) {
    popup.style.display = "flex";
    txtContent.innerText = questions[k].about;
    imgContent.setAttribute("src", `./images_game4/${k + 1}.png`)

    let close = document.querySelector("#close");
    close.addEventListener("click", function () {
        popup.style.display = "none";
        return;
    });
}

function lateCall() {
    j = QUESTION_COUNTER - 1
    popupFun(j);
    resetColors();
    next();
}

function total(arr) {
    let t = 0;
    for (let j = 0; j < arr.length; j++) {
        t += arr[j];
    }
    return t;
}

function clickPlay(num) {
    var a1 = document.querySelector("#clk-right");
    var a0 = document.querySelector("#clk-wrong");

    if (num === 0)
        a0.play();
    if (num === 1)
        a1.play();
}